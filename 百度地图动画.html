<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script type="text/javascript" src="https://api.map.baidu.com/api?v=1.0&&type=webgl&ak=uVo9NXxwYrugBN7lGxWWY0K3MsPw8Nc9"></script>
    <script type="text/javascript" src="https://api.map.baidu.com/library/TrackAnimation/src/TrackAnimation_min.js"></script>
    <style>
        html,body,#map{
            height: 100%;
            width: 100%;
            padding: 0;
            margin: 0;
            position: relative;
        }
        .anchorBL,.BMap_cpyCtrl{
            display: none;
        }
        #tools{
            position: absolute;
            left: 10px;
            top:10px;
            z-index:10
        }
    </style>
</head>
<body>
    <div id="map">
    </div>
    <div class="" id="tools">
        <button id="start">start</button>
        <button id="cancel">cancel</button>
    </div>
    <script>
            // 初始化地图 拿到地图实例
            var map = new BMapGL.Map('map')
            //展示的中心点
            var point = new BMapGL.Point(116.418038,39.91979)
            //显示的级别
            map.centerAndZoom(point,15)
            map.enableScrollWheelZoom(true)
            map.setHeading(0)
            var points = [
                new BMapGL.Point(116.418038,39.91979),
                new BMapGL.Point(116.418267,40.059246),
                new BMapGL.Point(116.307899,40.057038)
            ]
            var lines = new BMapGL.Polyline(points)
            var opts = {
                delay:1000,
                duration:20000,
                tilt:30, // 轨迹播放的角度，默认为55
                overallView:true  // 动画完成后自动调整视野到总览
            }
            var trackAnimation = new BMapGLLib.TrackAnimation(map,lines,opts)
            trackAnimation.start()

            //keyframe动画
        //     var keyFrames = [{
        //        center:new BMapGL.Point(116.404,39.915),
        //        zoom:21,
        //        tilt:50,
        //        heading:0,
        //        percentage:0
        //     },
        //     {
        //        center:new BMapGL.Point(116.404,39.915),
        //        zoom:21,
        //        tilt:50,
        //        heading:100,
        //        percentage:0.5
        //     },
        //     {
        //        center:new BMapGL.Point(116.404,39.915),
        //        zoom:21,
        //        tilt:50,
        //        heading:200,   
        //        percentage:1
        //     }
        // ]
        //     var opts = {
        //         delay:1000,
        //         duration:3000,
        //         interation:'INFINITE'
        //     }
        //     var animation = new BMapGL.ViewAnimation(keyFrames,opts)
        //    // map.startViewAnimation(animation)
        //    document.getElementById('start').addEventListener('click',function(e){
        //     map.startViewAnimation(animation)
        //    })
        //    document.getElementById('cancel').addEventListener('click',function(e){
        //        map.cancelViewAnimation(animation)
        //    })
        //    animation.addEventListener('animationstart',function(e){
        //        console.log('start')
        //    })
    </script>
</body>
</html>